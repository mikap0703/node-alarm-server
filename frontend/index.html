<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Log Viewer</title>
</head>
<body>
<h1>Log Viewer</h1>
<select id="logFile"></select>
<hr>
<pre id="logContent"></pre>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
    const socket = io();
    const logFileSelect = document.getElementById('logFile');
    // Listen for "submit" events on the form
    logFileSelect.addEventListener('change', (event) => {
        event.preventDefault();
        const filename = logFileSelect.value;
        console.log(filename)
        socket.emit('selectLog', filename);
    });

    socket.on('logFiles', (logFiles) => {
        for (const logFile of logFiles) {
            const listItem = document.createElement('option');
            listItem.textContent = logFile;
            listItem.value = logFile
            logFileSelect.appendChild(listItem);
        }
    });

    // Listen for "logEntry" events
    socket.on('logEntry', (line) => {
        const logContent = document.getElementById('logContent');
        logContent.textContent += '\n' + line;
    });

    socket.on('logContent', (content) => {
        const logContent = document.getElementById('logContent');
        logContent.textContent = content;
    });
</script>
